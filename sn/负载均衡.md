#负载均衡

负载均衡是集群技术的一种应用，指的是将工作任务分摊到多个处理单元，从而提高并发处理能力。目前最常见的负载均衡是web负载均衡。

##WEB负载均衡常用的实现技术

1. DNS轮询
2. IP负载均衡
3. CDN

##WEB负载均衡
服务器集群使得多个服务器节点能够协同工作，可以分为：
 
- 高性能集群--分配处理任务，汇总处理结果
- 高可用性集群--提高冗余单元避免单点故障
- 负载均衡集群，即指将大量的并发分担到多个处理节点，由于单个处理节点的故障不影响整个服务，负载均衡集群同时也实现了告可用性。

负载均衡实现了横向扩展，避免了纵向升级换代。

这里专门讲一下web请求的负载均衡。

##基本原理
负载均衡的核心--建立一对多的映射机制。对于web请求来说就是，一个请求的入口映射到多个处理请求的节点，实现分治的功能。这样的映射机制使得多个物理存在对外体现为一个虚拟的实体，对服务的请求者屏蔽了内部结构。常用的建立映射机制的方法包括：DNS轮询、CDN、IP负载均衡


##http重定向

当http代理向web服务器请求某个url后,web服务器可以通过http响应头信息中的Location标记来返回一个新的URL，这意味着http代理需要继续请求这个新的url完成自动的跳转。
这一个方法主要受到主服务器吞吐率的限制，同时访问的深度不够（因为重定向到单一静态页面）

权衡得失，第一个限制相对于第二个限制越小，那么重定向的意义就越大，如很多镜像下载站就是利用的重定向。


##DNS

**DNS映射关系可以是一对多的**，即一个域名对应多个IP地址。从而实现了负载均衡。

通常用于要求不高的场景，并且DNS轮询方式直接将服务器的真实地址暴露给用户，不利于服务器的安全。

##CDN--中文名字叫内容分发网络

基于DNS方法的扩展，通过发布机制将内容同步到大量的缓存节点，找到离用户最近的缓存节点作为提供服务节点。

##IP负载均衡

基于特定的TCP/IP技术实现的负载均衡，如NAT/DR/Turing等。实现方式有两种，一种为硬件设备一种为软件设备。硬件设备的主要产品是F5-BIG-IP-GTM（简称F5)，软件产品主要有LVS、HAProxy、NginX。其中LVS、HAProxy可以工作在4-7层，NginX工作在7层。